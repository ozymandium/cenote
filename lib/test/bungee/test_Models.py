import unittest

import bungee

class TestModels(unittest.TestCase):
    def test_a_b(self):
        """https://en.wikipedia.org/wiki/B%C3%BChlmann_decompression_algorithm"""
        vals = [
            # ZHL16A Nitrogen
            [4.0, 1.2599, 0.5050],
            [8.0, 1.0000, 0.6514],
            [12.5, 0.8618, 0.7222],
            [18.5, 0.7562, 0.7725],
            [27.0, 0.6667, 0.8125],
            [38.3, 0.5933, 0.8434],
            [54.3, 0.5282, 0.8693],
            [77.0, 0.4701, 0.8910],
            [109.0, 0.4187, 0.9092],
            [146.0, 0.3798, 0.9222],
            [187.0, 0.3497, 0.9319],
            [239.0, 0.3223, 0.9403],
            [305.0, 0.2971, 0.9477],
            [390.0, 0.2737, 0.9544],
            [498.0, 0.2523, 0.9602],
            [635.0, 0.2327, 0.9653],
            # # ZHL16A Helium
            # [1.5, 1.7435, 0.1911],
            # [3.0, 1.3838, 0.4295],
            # [4.7, 1.1925, 0.5446],
            # [7.0, 1.0465, 0.6265],
            # [10.2, 0.9226, 0.6917],
            # [14.5, 0.8211, 0.7420],
            # [20.5, 0.7309, 0.7841],
            # [29.1, 0.6506, 0.8195],
            # [41.1, 0.5794, 0.8491],
            # [55.1, 0.5256, 0.8703],
            # [70.6, 0.4840, 0.8860],
            # [90.2, 0.4460, 0.8997],
            # [115.1, 0.4112, 0.9118],
            # [147.2, 0.3788, 0.9226],
            # [187.9, 0.3492, 0.9321],
            # [239.6, 0.3220, 0.9404],
        ]
        for t, a, b in vals:
            params = bungee.CompartmentParams(t)
            self.assertAlmostEqual(params.a, a, 4)
            self.assertAlmostEqual(params.b, b, 4)